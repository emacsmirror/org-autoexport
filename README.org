#+title: Org Autoexport
#+author: Glenn Hutchings
#+email: zondo42@gmail.com

* Intro

TODO: write intro

* Plan

Write a more general org auto-exporter:

- Add save hook to possibly export org file
- Export automatically or only if exported suffix already exists
- Ignore narrowing and region settings on export

* Ideas

- Use ~org-export-to-file~ for the export.  Can specify backend as a symbol:

  #+begin_src emacs-lisp
    (org-export-to-file 'md "README.md")
    (org-export-to-file 'html "README.html")

    ;; This determines whether the backend exists.
    (org-export-get-backend 'gfm) ;; yes
    (org-export-get-backend 'md) ;; yes
    (org-export-get-backend 'nope) ;; no
  #+end_src

  Think this handles narrowing and region as well.

- Need a way to map backend to suffix.  gfm and md map to ".md".

- Check out [[https://github.com/jamcha-aa/auto-org-md/blob/master/auto-org-md.el][auto-org-md]] for more ideas.

* Original code

#+begin_src emacs-lisp
  (defun my-export-markdown-on-save ()
    "Export Org file to markdown if the markdown file already exists."

    (let* ((pathname (buffer-file-name))
           (markdown (replace-regexp-in-string "\\.org$" ".md" pathname)))
      (when (and (s-suffix-p ".org" pathname) (f-exists-p markdown))
        (org-gfm-export-to-markdown nil nil nil))))

  (add-hook 'after-save-hook 'my-export-markdown-on-save)
#+end_src
